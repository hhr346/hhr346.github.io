---
import ContentLayout from '../layouts/ContentLayout.astro';
import Section from '../components/Section.astro';
import Footer from '../components/Footer.astro';
import { getProjects } from '../lib/content-loader';

const projectsList = await getProjects();
---

<ContentLayout title="é¡¹ç›®">
  <Section>
    <h2>ç²¾é€‰é¡¹ç›®</h2>
    <p>è¿™é‡Œå±•ç¤ºä¸€äº›æˆ‘æ„Ÿå…´è¶£å’Œæ­£åœ¨è¿›è¡Œçš„é¡¹ç›®ã€‚</p>

    <div class="projects-list">
      {projectsList.map((project) => (
        <article class="project-item">
          <h3>
            {project.data.link ? (
              <a href={project.data.link} target="_blank" rel="noopener noreferrer">
                {project.data.title}
              </a>
            ) : (
              <span>{project.data.title}</span>
            )}
          </h3>
          {project.data.description && (
            <p class="project-desc">{project.data.description}</p>
          )}
          {project.data.tags.length > 0 && (
            <p class="project-tags">
              {project.data.tags.map((tag) => (
                <span class="tag">{tag}</span>
              ))}
            </p>
          )}
          {project.data.repo && (
            <a href={project.data.repo} class="repo-link" target="_blank" rel="noopener noreferrer">
              ğŸ“‚ æŸ¥çœ‹ä»£ç 
            </a>
          )}
        </article>
      ))}
    </div>
  </Section>
  <Footer />
</ContentLayout>

<style>
  .projects-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .project-item {
    padding: 1.5rem;
    background-color: var(--bg-secondary);
    border-radius: 6px;
    border: 1px solid var(--border);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .project-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px -1px var(--shadow);
  }

  .project-item h3 {
    margin: 0 0 0.75rem 0;
    font-size: 1.25rem;
  }

  .project-item h3 a {
    color: var(--primary);
  }

  .project-item h3 a:hover {
    text-decoration: underline;
  }

  .project-desc {
    color: var(--text-secondary);
    line-height: 1.8;
    margin: 0 0 1rem 0;
  }

  .project-tags {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    margin-bottom: 1rem;
  }

  .project-tags .tag {
    background-color: var(--primary-10);
    color: var(--primary);
  }

  .repo-link {
    color: var(--text-muted);
    font-size: 0.9rem;
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
  }

  .repo-link:hover {
    color: var(--primary);
  }
</style>
