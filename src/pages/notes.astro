---
import ContentLayout from '../layouts/ContentLayout.astro';
import Section from '../components/Section.astro';
import Footer from '../components/Footer.astro';
import { getNotes } from '../lib/content-loader';

const notesList = await getNotes();
---

<ContentLayout title="笔记">
  <Section>
    <h2>学习笔记</h2>
    <p>这里记录我的学习心得和技术笔记。</p>

    <div class="notes-list">
      {notesList.map((note) => (
        <article class="note-item">
          <div class="note-header">
            <div class="note-meta">
              <time datetime={note.data.pubDate.toISOString()}>
                {note.data.pubDate.toLocaleDateString('zh-CN')}
              </time>
              {note.data.tags.length > 0 && (
                <div class="note-tags">
                  {note.data.tags.map((tag) => (
                    <span class="tag">{tag}</span>
                  ))}
                </div>
              )}
            </div>
            <h3>
              <a href={note.url} class="note-title">{note.data.title}</a>
            </h3>
          </div>
          {note.data.description && (
            <p class="note-description">{note.data.description}</p>
          )}
        </article>
      ))}
    </div>
  </Section>
  <Footer />
</ContentLayout>

<style>
  .notes-list {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .note-item {
    padding: 1.5rem;
    background-color: var(--bg-secondary);
    border-radius: 6px;
    border: 1px solid var(--border);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .note-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px -1px var(--shadow);
  }

  .note-header {
    margin-bottom: 0.75rem;
  }

  .note-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
    align-items: center;
  }

  .note-tags {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .note-title {
    margin: 0;
    font-size: 1.25rem;
    color: var(--primary);
  }

  .note-title:hover {
    text-decoration: underline;
  }

  .note-description {
    color: var(--text-secondary);
    line-height: 1.8;
    margin: 0;
  }
</style>
